{% load static %}
<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="utf-8">
    <title>Projekt AWWW</title>
    <link rel="stylesheet" href="{% static 'compiler/style.css'%}">
  </head>

  <body>
    <div class="container">
      <div class="header">
        <div>
          <button onclick="location.href='/main/newFolder/'" class="menu-button">Nowy folder</button>
          <button onclick="location.href='/main/newFile/'" class="menu-button">Nowy plik</button>
          <button onclick="location.href='/main/deleteFolder/'" class="menu-button">Usuń folder</button>
          <button onclick="location.href='/main/deleteFile/'" class="menu-button">Usuń plik</button>
          {% if file_to_show %}
          <button onclick="submitForm()" class="menu-button">Kompilacja</button>
          {% endif %}
          {% if asm_to_show %}
          <button onclick="location.href='/main/file/{{ file_id }}/compiled/download/'" class="menu-button">Pobierz</button>
          {% endif %}
        </div>
        <div style="text-align: right;">
          {% if user.is_authenticated %}
            Witaj {{ user.username }}
            <button onclick="location.href='/logout'" class="menu-button">Wyloguj</button>
          {% else %}
            <button onclick="location.href='/login'" class="menu-button">Zaloguj</button>
          {% endif %}
        </div>
      </div>
      <div class="sidebar">
        <h3>Wybór pliku</h3>
        {% include 'compiler/printTree.html' %}
      </div>
      <div class="text">
        <h3>Tekst Programu</h3>
        {% if file_to_show %}
          <pre class="odd">{{ file_to_show }}</pre>
        {% endif %}
      </div>
      <div class="code">
        <h3>Fragment kodu</h3>
        {% if sections %}
          {% for section in sections %}
            {% if forloop.counter0|divisibleby:2 %}
              {% if forloop.counter0 != 0 %}
                <pre class="even" onmouseover="highlight(this)">{{ section }}</pre>
              {% endif %}
            {% else %}
              <pre class="odd" onmouseover="highlight(this)">{{ section }}</pre>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>
      <script>
        function highlight(element) {
          element.classList.add("highlight");
          element.onmouseout = function() {
            element.classList.remove("highlight");
          }
        }
      </script>
      <div class="buttons">
        <button id="standard" class="trapezoid-button" onClick="ShowTab('standard')">Standard</button>
        <button id="optimizations" class="trapezoid-button" onClick="ShowTab('optimizations')">Optymalizacje</button>
        <button id="processor" class="trapezoid-button" onClick="ShowTab('processor')">Procesor</button>
        <button id="dependent" class="trapezoid-button" onClick="ShowTab('dependent')">Zależne</button>
      </div>
      <div class="data" id="data-div">
        <h3>Wybierz opcje, klikając powyższe przyciski.</h3>
      </div>
    </div>
    
    <div style="display:none;">
      <form id="hidden-form" method="post" action="/main/file/{{ file_id }}/compiled/">
        {% csrf_token %}
        <input type="hidden" name="standard" id="hidden-standard" value="">
        <input type="hidden" name="optimization" id="hidden-optimization" value="">
        <input type="hidden" name="processor" id="hidden-processor" value="">
        <input type="hidden" name="dependent" id="hidden-dependent" value="">
        <button type="submit">Submit</button>
      </form>
    </div>
      <script src="{% static 'compiler/script.js' %}"></script>
  </body>
</html>
